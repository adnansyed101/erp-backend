// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Gender {
  MALE
  Female
  Other
}

enum MaritalStatus {
  Single
  Married
  Divorced
  Widowed
  Separated
}

model Address {
  id                        String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  division                  String
  district                  String
  upazilaOrThana            String
  postOffice                String
  postCode                  String
  block                     String
  houseNoOrVillage          String
  roadNo                    String
  createdAt                 DateTime  @default(now()) @db.Timestamp(6)
  employeePresentAddress    Employee? @relation("employeePresentAddress")
  employeePermanenttAddress Employee? @relation("employeePermanentAddress")
}

model SpouseInformation {
  id           String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  fullName     String
  dateOfBirth  DateTime   @default(now()) @db.Timestamp(6)
  gender       String
  occupation   String
  nid          String
  mobileNumber String
  email        String     @unique
  createdAt    DateTime   @default(now()) @db.Timestamp(6)
  employees    Employee[]
}

model Employee {
  id                  String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  fullName            String
  imageUrl            String
  officeEmail         String            @unique
  personalEmail       String            @unique
  personalNumber      String
  officeNumber        String
  employeeType        String
  employeeStatus      String
  nationality         String
  disability          Boolean
  gender              Gender
  religion            String
  joiningDesignation  String
  currentDesignation  String
  dateOfBirth         DateTime          @default(now()) @db.Timestamp(6)
  dateOfConfirmation  DateTime          @default(now()) @db.Timestamp(6)
  fatherName          String?           @default("n/a")
  motherName          String?           @default("n/a")
  nationalId          String?           @default("n/a")
  placeOfBirth        String?           @default("n/a")
  maritalStatus       MaritalStatus?    @default(Single)
  eTIN                String?           @default("n/a")
  program             String?           @default("n/a")
  unit                String?           @default("n/a")
  bankName            String
  branchName          String
  accountNumber       String
  walletType          String
  walletNumber        String
  prlDate             DateTime?         @default(now()) @db.Timestamp(6)
  dateofRegularity    DateTime?         @default(now()) @db.Timestamp(6)
  presentAddressId    String            @unique @db.Uuid
  presentAddress      Address           @relation("employeePresentAddress", fields: [presentAddressId], references: [id])
  permanentAddressId  String            @unique @db.Uuid
  permanentAddress    Address           @relation(name: "employeePermanentAddress", fields: [permanentAddressId], references: [id])
  spouseInformation   SpouseInformation @relation(fields: [spouseInformationId], references: [id])
  spouseInformationId String            @db.Uuid
}
